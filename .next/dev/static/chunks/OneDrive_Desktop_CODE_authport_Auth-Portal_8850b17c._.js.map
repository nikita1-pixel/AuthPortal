{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nirma/OneDrive/Desktop/CODE/authport/Auth-Portal/src/app/actions/register.ts"],"sourcesContent":["\"use server\";\r\nimport { hash } from \"bcryptjs\"; // npm install bcryptjs\r\nimport { prisma } from \"@/lib/prisma\"; // Adjust based on your prisma setup\r\nimport { redirect } from \"next/navigation\";\r\n\r\nexport async function registerUser(formData: FormData) {\r\n    const name = formData.get(\"name\") as string;\r\n    const email = formData.get(\"email\") as string;\r\n    const password = formData.get(\"password\") as string;\r\n\r\n    if (!email || !password || !name) {\r\n        return { error: \"All fields are required\" };\r\n    }\r\n\r\n    // 1. Check if user already exists\r\n    const existingUser = await prisma.user.findUnique({\r\n        where: { email },\r\n    });\r\n\r\n    if (existingUser) {\r\n        return { error: \"User already exists with this email\" };\r\n    }\r\n\r\n    // 2. Hash the password\r\n    const hashedPassword = await hash(password, 12);\r\n\r\n    // 3. Create the user in the database\r\n    try {\r\n        await prisma.user.create({\r\n            data: {\r\n                name,\r\n                email,\r\n                password: hashedPassword,\r\n            },\r\n        });\r\n    } catch (err) {\r\n        return { error: \"Database error. Please try again.\" };\r\n    }\r\n\r\n    // 4. Redirect to login (or dashboard if you handle auto-login)\r\n    return { success: true };\r\n}"],"names":[],"mappings":";;;;;;;IAKsB,eAAA,WAAA,GAAA,IAAA,+SAAA,EAAA,8CAAA,oSAAA,EAAA,KAAA,GAAA,0SAAA,EAAA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nirma/OneDrive/Desktop/CODE/authport/Auth-Portal/src/app/register/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\"; // Added for loading state\r\nimport { registerUser } from \"../actions/register\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function RegisterPage() {\r\n    const router = useRouter();\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    async function handleSubmit(formData: FormData) {\r\n        setLoading(true);\r\n        setError(\"\"); // Clear previous errors\r\n\r\n        const result = await registerUser(formData);\r\n\r\n        if (result?.success) {\r\n            // Success! Send them to login or dashboard\r\n            router.push(\"/login?message=Account created successfully\");\r\n        } else {\r\n            setError(result?.error || \"Something went wrong\");\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center min-h-screen bg-[#121212] px-4\">\r\n            <form\r\n                action={handleSubmit}\r\n                className=\"bg-white/5 p-8 rounded-2xl border border-white/10 flex flex-col gap-6 max-w-md w-full backdrop-blur-md\"\r\n            >\r\n                <div className=\"space-y-2\">\r\n                    <h2 className=\"text-white text-3xl font-bold\">Create Account</h2>\r\n                    <p className=\"text-gray-400 text-sm\">Join the Identity Control portal today.</p>\r\n                </div>\r\n\r\n                {/* Show Error Message if exists */}\r\n                {error && (\r\n                    <div className=\"bg-red-500/10 border border-red-500 text-red-500 p-3 rounded-lg text-sm\">\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"flex flex-col gap-4\">\r\n                    <input name=\"name\" required placeholder=\"Full Name\"\r\n                        className=\"p-3 rounded-lg bg-black/50 text-white border border-white/10 focus:border-amber-500 outline-none transition-all\" />\r\n\r\n                    <input name=\"email\" required type=\"email\" placeholder=\"Email\"\r\n                        className=\"p-3 rounded-lg bg-black/50 text-white border border-white/10 focus:border-amber-500 outline-none transition-all\" />\r\n\r\n                    <input name=\"password\" required type=\"password\" placeholder=\"Password\"\r\n                        className=\"p-3 rounded-lg bg-black/50 text-white border border-white/10 focus:border-amber-500 outline-none transition-all\" />\r\n                </div>\r\n\r\n                <button\r\n                    disabled={loading}\r\n                    type=\"submit\"\r\n                    className=\"bg-amber-600 p-3 rounded-lg text-white font-bold hover:bg-amber-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                >\r\n                    {loading ? \"Creating Account...\" : \"Register\"}\r\n                </button>\r\n\r\n                <p className=\"text-center text-gray-500 text-sm\">\r\n                    Already have an account? <a href=\"/login\" className=\"text-amber-500 hover:underline\">Log in</a>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA,2XAAkC,0BAA0B;AAC5D;AACA;;;AAHA;;;;AAKe,SAAS;;IACpB,MAAM,SAAS,IAAA,+MAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sOAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sOAAQ,EAAC;IAEnC,eAAe,aAAa,QAAkB;QAC1C,WAAW;QACX,SAAS,KAAK,wBAAwB;QAEtC,MAAM,SAAS,MAAM,IAAA,6OAAY,EAAC;QAElC,IAAI,QAAQ,SAAS;YACjB,2CAA2C;YAC3C,OAAO,IAAI,CAAC;QAChB,OAAO;YACH,SAAS,QAAQ,SAAS;YAC1B,WAAW;QACf;IACJ;IAEA,qBACI,0PAAC;QAAI,WAAU;kBACX,cAAA,0PAAC;YACG,QAAQ;YACR,WAAU;;8BAEV,0PAAC;oBAAI,WAAU;;sCACX,0PAAC;4BAAG,WAAU;sCAAgC;;;;;;sCAC9C,0PAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;gBAIxC,uBACG,0PAAC;oBAAI,WAAU;8BACV;;;;;;8BAIT,0PAAC;oBAAI,WAAU;;sCACX,0PAAC;4BAAM,MAAK;4BAAO,QAAQ;4BAAC,aAAY;4BACpC,WAAU;;;;;;sCAEd,0PAAC;4BAAM,MAAK;4BAAQ,QAAQ;4BAAC,MAAK;4BAAQ,aAAY;4BAClD,WAAU;;;;;;sCAEd,0PAAC;4BAAM,MAAK;4BAAW,QAAQ;4BAAC,MAAK;4BAAW,aAAY;4BACxD,WAAU;;;;;;;;;;;;8BAGlB,0PAAC;oBACG,UAAU;oBACV,MAAK;oBACL,WAAU;8BAET,UAAU,wBAAwB;;;;;;8BAGvC,0PAAC;oBAAE,WAAU;;wBAAoC;sCACpB,0PAAC;4BAAE,MAAK;4BAAS,WAAU;sCAAiC;;;;;;;;;;;;;;;;;;;;;;;AAKzG;GA/DwB;;QACL,+MAAS;;;KADJ"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nirma/OneDrive/Desktop/CODE/authport/Auth-Portal/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;;;;;;;;;;;;;;;;IAEjBA,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IAMVC,qBAAqB,EAAA;eAArBA,QAAAA,qBAAqB;;IALrBC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;wBAKK","ignoreList":[0]}}]
}